{"ast":null,"code":"import _classCallCheck from\"C:/Users/Kate/Desktop/Projects/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/Kate/Desktop/Projects/react-mesto-api-full-gha/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(_ref){var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this._baseUrl=baseUrl;this._headers=headers;}_createClass(Api,[{key:\"_checkResponse\",value:function _checkResponse(resp){if(resp.ok){return resp.json();}else{Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(resp.status,\" \").concat(resp.statusText));}}},{key:\"getAllCards\",value:function getAllCards(){var _this=this;return fetch(this._baseUrl+\"/cards\",{method:\"GET\",headers:this._headers}).then(function(responce){return _this._checkResponse(responce);});}},{key:\"addNewCard\",value:function addNewCard(values){var _this2=this;return fetch(this._baseUrl+\"/cards\",{method:\"POST\",headers:this._headers,body:JSON.stringify(values)}).then(function(responce){return _this2._checkResponse(responce);});}},{key:\"removeCard\",value:function removeCard(id){var _this3=this;return fetch(this._baseUrl+\"/cards/\".concat(id),{method:\"DELETE\",headers:this._headers}).then(function(responce){return _this3._checkResponse(responce);});}},{key:\"getUserData\",value:function getUserData(){var _this4=this;return fetch(this._baseUrl+'/users/me',{method:\"GET\",headers:this._headers}).then(function(responce){return _this4._checkResponse(responce);});}},{key:\"editProfileInfo\",value:function editProfileInfo(values){var _this5=this;return fetch(this._baseUrl+'/users/me',{method:\"PATCH\",headers:this._headers,body:JSON.stringify({name:values.name,about:values.about})}).then(function(responce){return _this5._checkResponse(responce);});}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(id,isLiked){var _this6=this;return fetch(this._baseUrl+\"/cards/\".concat(id,\"/likes\"),{method:isLiked?'PUT':'DELETE',headers:this._headers}).then(function(responce){return _this6._checkResponse(responce);});}},{key:\"editAvatar\",value:function editAvatar(link){var _this7=this;return fetch(this._baseUrl+'/users/me/avatar',{method:\"PATCH\",headers:this._headers,body:JSON.stringify(link)}).then(function(responce){return _this7._checkResponse(responce);});}}]);return Api;}();var token=localStorage.getItem('token');var newApi=new Api({// baseUrl: 'http://localhost:3000',\nbaseUrl:'https://velichkoo.nomoredomains.monster',headers:{authorization:\"Bearer \".concat(token),'Content-type':'application/json'// 'Access-Control-Allow-Methods': 'GET,HEAD,PUT,PATCH,POST,DELETE',\n// 'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept',\n// 'Access-Control-Allow-Origin': '*' \n}});export default newApi;","map":{"version":3,"names":["Api","baseUrl","headers","_baseUrl","_headers","resp","ok","json","Promise","reject","status","statusText","fetch","method","then","responce","_checkResponse","values","body","JSON","stringify","id","name","about","isLiked","link","token","localStorage","getItem","newApi","authorization"],"sources":["C:/Users/Kate/Desktop/Projects/react-mesto-api-full-gha/frontend/src/utils/Api.js"],"sourcesContent":["class Api {\r\n    constructor({ baseUrl, headers }) {\r\n        this._baseUrl = baseUrl;\r\n        this._headers = headers;\r\n    }\r\n\r\n    _checkResponse(resp) {\r\n        if (resp.ok) {\r\n            return resp.json();\r\n        } else {\r\n            Promise.reject(`Ошибка: ${resp.status} ${resp.statusText}`)\r\n        }\r\n    }\r\n\r\n    getAllCards() {\r\n        return fetch(this._baseUrl + \"/cards\", {\r\n            method: \"GET\",\r\n            headers: this._headers,\r\n        })\r\n            .then((responce) => {\r\n                return this._checkResponse(responce);\r\n            })\r\n    }\r\n\r\n    addNewCard(values) {\r\n        return fetch(this._baseUrl + \"/cards\", {\r\n            method: \"POST\",\r\n            headers: this._headers,\r\n            body: JSON.stringify(values)\r\n        })\r\n            .then((responce) => {\r\n                return this._checkResponse(responce);\r\n            })\r\n    }\r\n\r\n\r\n    removeCard(id) {\r\n        return fetch(this._baseUrl + `/cards/${id}`, {\r\n            method: \"DELETE\",\r\n            headers: this._headers,\r\n        })\r\n            .then((responce) => {\r\n                return this._checkResponse(responce);\r\n\r\n            })\r\n    }\r\n\r\n    getUserData() {\r\n        return fetch(this._baseUrl + '/users/me', {\r\n            method: \"GET\",\r\n            headers: this._headers,\r\n        })\r\n            .then((responce) => {\r\n                return this._checkResponse(responce);\r\n            })\r\n    }\r\n\r\n    editProfileInfo(values) {\r\n        return fetch(this._baseUrl + '/users/me', {\r\n            method: \"PATCH\",\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: values.name,\r\n                about: values.about,\r\n            })\r\n        })\r\n            .then((responce) => {\r\n                return this._checkResponse(responce);\r\n            })\r\n\r\n    }\r\n\r\n    changeLikeCardStatus(id, isLiked) {\r\n        return fetch(this._baseUrl + `/cards/${id}/likes`, {\r\n            method: isLiked ? 'PUT' : 'DELETE',\r\n            headers: this._headers,\r\n        })\r\n            .then((responce) => {\r\n                return this._checkResponse(responce);\r\n            })\r\n    }\r\n\r\n\r\n    editAvatar(link) {\r\n        return fetch(this._baseUrl + '/users/me/avatar', {\r\n            method: \"PATCH\",\r\n            headers: this._headers,\r\n            body: JSON.stringify(link)\r\n\r\n        })\r\n            .then((responce) => {\r\n                return this._checkResponse(responce);\r\n            })\r\n    }\r\n}\r\n\r\nconst token = localStorage.getItem('token');\r\n\r\nconst newApi = new Api({\r\n    // baseUrl: 'http://localhost:3000',\r\n    baseUrl: 'https://velichkoo.nomoredomains.monster',\r\n    headers: {\r\n        authorization: `Bearer ${token}`,\r\n        'Content-type': 'application/json'\r\n        // 'Access-Control-Allow-Methods': 'GET,HEAD,PUT,PATCH,POST,DELETE',\r\n        // 'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept',\r\n        // 'Access-Control-Allow-Origin': '*' \r\n    }\r\n});\r\n\r\nexport default newApi;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}